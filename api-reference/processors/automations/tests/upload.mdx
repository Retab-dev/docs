---
title: 'Upload'
openapi: 'POST /v1/processors/automations/tests/upload/{automation_id}'
---

<RequestExample>

```python python
client.processors.automations.tests.upload(
    automation_id=link.id,
    document="your-invoice-email.eml",
)
```

```bash bash

curl -X POST "https://api.retab.com/v1/processors/automations/tests/upload/{automation_id}" \
    -H "Api-Key: {YOUR_API_KEY}" \
    -F "file=@your-invoice-email.eml"
```



</RequestExample>

<ResponseExample>

```json
{
  "object": "automation_log",
  "id": "log_auto_pwlWPqfCilUt8rWZGoBV7",
  "user_email": null,
  "organization_id": "org_01JHR50BY5FSW274FY2TGH7EQM",
  "created_at": "2025-06-26T16:18:51.950748Z",
  "automation_snapshot": {
    "id": "lnk_DwHVXFUVLgIkxXQaxvx2s",
    "name": "Link Automation 4",
    "processor_id": "proc_2BTqDkKOTO_Ddz1N7JwVZ",
    "updated_at": "2025-06-26T16:10:20.727000",
    "default_language": "en",
    "webhook_url": "http://localhost:4000/test-webhook",
    "webhook_headers": {},
    "need_validation": false,
    "object": "automation"
  },
  "completion": {
    "id": "chatcmpl-BmjbA0bzdiYh08Rg1v7tLzsBno993",
    "choices": [
      {
        "finish_reason": "stop",
        "index": 0,
        "logprobs": null,
        "message": {
          "content": "{\"supplier_phone\": \"\", \"invoice_date\": \"\", \"amount_due\": 0, \"supplier_email\": \"\", \"receiver_phone\": \"\", \"total_tax_amount\": 0, \"invoice_id\": \"\", \"supplier_name\": \"\", \"total_amount\": 0, \"receiver_name\": \"\", \"supplier_website\": \"\", \"supplier_address\": \"\", \"currency\": \"\", \"ship_to_name\": \"\", \"ship_to_address\": \"\", \"line_items\": [], \"receiver_email\": \"\", \"receiver_address\": \"\", \"amount_paid_since_last_invoice\": 0, \"net_amount\": 0}",
          "refusal": null,
          "role": "assistant",
          "annotations": null,
          "audio": null,
          "function_call": null,
          "tool_calls": null,
          "parsed": {
            "supplier_phone": "",
            "invoice_date": "",
            "amount_due": 0.0,
            "supplier_email": "",
            "receiver_phone": "",
            "total_tax_amount": 0.0,
            "invoice_id": "",
            "supplier_name": "",
            "total_amount": 0.0,
            "receiver_name": "",
            "supplier_website": "",
            "supplier_address": "",
            "currency": "",
            "ship_to_name": "",
            "ship_to_address": "",
            "line_items": [],
            "receiver_email": "",
            "receiver_address": "",
            "amount_paid_since_last_invoice": 0.0,
            "net_amount": 0.0
          }
        },
        "field_locations": null,
        "key_mapping": null
      }
    ],
    "created": 1750954724,
    "model": "gpt-4o-mini-2024-07-18",
    "object": "chat.completion",
    "service_tier": null,
    "system_fingerprint": null,
    "usage": {
      "completion_tokens": 106,
      "prompt_tokens": 124162,
      "total_tokens": 124268,
      "completion_tokens_details": {
        "accepted_prediction_tokens": 0,
        "audio_tokens": 0,
        "reasoning_tokens": 0,
        "rejected_prediction_tokens": 0
      },
      "prompt_tokens_details": {
        "audio_tokens": 0,
        "cached_tokens": 0
      }
    },
    "extraction_id": "extr_TJyKFjad-NHxYUKJG2XIl",
    "likelihoods": {},
    "schema_validation_error": null,
    "request_at": "2025-06-26T16:18:43.511880Z",
    "first_token_at": "2025-06-26T16:18:48.859049Z",
    "last_token_at": "2025-06-26T16:18:51.733691Z",
    "api_cost": {
      "value": 0.018687899999999997,
      "currency": "USD"
    }
  },
  "file_metadata": {
    "filename": "your-invoice-email.eml",
    "url": "data:message/rfc822;base64,UTI5dWRHVnVkQzFVZVhCbE9pQnRkV3gwYVhCaGNuUXZjbVZzWVhSbFpEc0tJR0p2ZFc1a1lYSjVQU0k5UFQwOVBUMDlQVDA5UFQwOVBUMHhNRFU1TVRnMU5qQTVNalkzTWprek5UZzVQVDBpQ2sxSlRVVXRWbVZ5YzJsdmJqb2dNUzR3Q2sxbGMzTmhaMlV0U1VRNklBb2dRVUZOYTBGRWJHeE5iVTAxVDFkT2EweFVaek5aYW1OMFRrZFNhMXBUTURWYVJHZDZURmRKTUUxdFdYcGFSR2hzV21wak5VNTNRa2RCUVVGQlFVRkJLemhQT0doSGNYZHhWRXRDYVZOc01FaFdWVE5PUW5kRFRsTlhXRzlXYzNKclZHOTNZakY1YTBseFZGbEpRVUZCUVVGQlJVMUJRVU5PVTFkWWIxWnpjbXRVYjNkaU1YbHJTWEZVV1VsQlFVZHlha0pJVlVGQlFUMEtVM1ZpYW1WamREb2dSM0p2ZFhCbElFSmxjblFnSmlCWmIzVWdPaUJFYjJOMWJXVnVkSE1nZEhKaGJuTnRhWE1nWkdWd2RXbHpJR1ZVVFZNZ2NHRnlJRkYxWlc1MGFXNEtJRU5CVUZKRlZGUkpDa1p5YjIwNklGRjFaVzUwYVc0Z1EwRlFVa1ZVVkVrZ1BIRXVZMkZ3Y21WMGRHbEFZbVZ5ZEM1bWNqNEtWRzg2SUR4UkxrTmhjSEpsZEhScFFHSmxjblF1Wm5JK0NrUmhkR1U2SUZSb2RTd2dNRGNnVG05MklESXdNalFnTURrNk5UQTZORGtnS3pBd01EQUtDaTB0UFQwOVBUMDlQVDA5UFQwOVBUMDlNVEExT1RFNE5UWXdPVEkyTnpJNU16VTRPVDA5Q2tOdmJuUmxiblF0Vkhsd1pUb2dkR1Y0ZEM5d2JHRnBianNnWTJoaGNuTmxkRDBpZFhSbUxUZ2lDazFKVFVVdFZtVnlj"
  },
  "external_request_log": {
    "webhook_url": "http://localhost:4000/test-webhook",
    "request_body": {
      "completion": {
        "id": "chatcmpl-BmjbA0bzdiYh08Rg1v7tLzsBno993",
        "choices": [
          {
            "finish_reason": "stop",
            "index": 0,
            "logprobs": null,
            "message": {
              "content": "{\"supplier_phone\": \"\", \"invoice_date\": \"\", \"amount_due\": 0, \"supplier_email\": \"\", \"receiver_phone\": \"\", \"total_tax_amount\": 0, \"invoice_id\": \"\", \"supplier_name\": \"\", \"total_amount\": 0, \"receiver_name\": \"\", \"supplier_website\": \"\", \"supplier_address\": \"\", \"currency\": \"\", \"ship_to_name\": \"\", \"ship_to_address\": \"\", \"line_items\": [], \"receiver_email\": \"\", \"receiver_address\": \"\", \"amount_paid_since_last_invoice\": 0, \"net_amount\": 0}",
              "refusal": null,
              "role": "assistant",
              "annotations": null,
              "audio": null,
              "function_call": null,
              "tool_calls": null,
              "parsed": {
                "supplier_phone": "",
                "invoice_date": "",
                "amount_due": 0.0,
                "supplier_email": "",
                "receiver_phone": "",
                "total_tax_amount": 0.0,
                "invoice_id": "",
                "supplier_name": "",
                "total_amount": 0.0,
                "receiver_name": "",
                "supplier_website": "",
                "supplier_address": "",
                "currency": "",
                "ship_to_name": "",
                "ship_to_address": "",
                "line_items": [],
                "receiver_email": "",
                "receiver_address": "",
                "amount_paid_since_last_invoice": 0.0,
                "net_amount": 0.0
              }
            },
            "field_locations": null,
            "key_mapping": null
          }
        ],
        "created": 1750954724,
        "model": "gpt-4o-mini-2024-07-18",
        "object": "chat.completion",
        "service_tier": null,
        "system_fingerprint": null,
        "usage": {
          "completion_tokens": 106,
          "prompt_tokens": 124162,
          "total_tokens": 124268,
          "completion_tokens_details": {
            "accepted_prediction_tokens": 0,
            "audio_tokens": 0,
            "reasoning_tokens": 0,
            "rejected_prediction_tokens": 0
          },
          "prompt_tokens_details": {
            "audio_tokens": 0,
            "cached_tokens": 0
          }
        },
        "extraction_id": "extr_TJyKFjad-NHxYUKJG2XIl",
        "likelihoods": {},
        "schema_validation_error": null,
        "request_at": "2025-06-26T16:18:43.511880Z",
        "first_token_at": "2025-06-26T16:18:48.859049Z",
        "last_token_at": "2025-06-26T16:18:51.733691Z",
        "api_cost": {
          "value": 0.018687899999999997,
          "currency": "USD"
        }
      },
      "file_payload": {
        "filename": "your-invoice-email.eml",
        "url": "data:message/rfc822;base64,UTI5dWRHVnVkQzFVZVhCbE9pQnRkV3gwYVhCaGNuUXZjbVZzWVhSbFpEc0tJR0p2ZFc1a1lYSjVQU0k5UFQwOVBUMDlQVDA5UFQwOVBUMHhNRFU1TVRnMU5qQTVNalkzTWprek5UZzVQVDBpQ2sxSlRVVXRWbVZ5YzJsdmJqb2dNUzR3Q2sxbGMzTmhaMlV0U1VRNklBb2dRVUZOYTBGRWJHeE5iVTAxVDFkT2EweFVaek5aYW1OMFRrZFNhMXBUTURWYVJHZDZURmRKTUUxdFdYcGFSR2hzV21wak5VNTNRa2RCUVVGQlFVRkJLemhQT0doSGNYZHhWRXRDYVZOc01FaFdWVE5PUW5kRFRsTlhXRzlXYzNKclZHOTNZakY1YTBseFZGbEpRVUZCUVVGQlJVMUJRVU5PVTFkWWIxWnpjbXRVYjNkaU1YbHJTWEZVV1VsQlFVZHlha0pJVlVGQlFUMEtVM1ZpYW1WamREb2dSM0p2ZFhCbElFSmxjblFnSmlCWmIzVWdPaUJFYjJOMWJXVnVkSE1nZEhKaGJuTnRhWE1nWkdWd2RXbHpJR1ZVVFZNZ2NHRnlJRkYxWlc1MGFXNEtJRU5CVUZKRlZGUkpDa1p5YjIwNklGRjFaVzUwYVc0Z1EwRlFVa1ZVVkVrZ1BIRXVZMkZ3Y21WMGRHbEFZbVZ5ZEM1bWNqNEtWRzg2SUR4UkxrTmhjSEpsZEhScFFHSmxjblF1Wm5JK0NrUmhkR1U2SUZSb2RTd2dNRGNnVG05MklESXdNalFnTURrNk5UQTZORGtnS3pBd01EQUtDaTB0UFQwOVBUMDlQVDA5UFQwOVBUMDlNVEExT1RFNE5UWXdPVEkyTnpJNU16VTRPVDA5Q2tOdmJuUmxiblF0Vkhsd1pUb2dkR1Y0ZEM5d2JHRnBianNnWTJoaGNuTmxkRDBpZFhSbUxUZ2lDazFKVFVVdFZtVnlj"
      },
      "user": "test@retab.com"
    },
    "request_headers": {},
    "request_at": "2025-06-26T16:18:51.913733Z",
    "response_body": {
      "message": "Webhook received"
    },
    "response_headers": {
      "date": "Thu, 26 Jun 2025 16:18:51 GMT",
      "server": "uvicorn",
      "content-length": "30",
      "content-type": "application/json"
    },
    "response_at": "2025-06-26T16:18:51.950111Z",
    "status_code": 200,
    "error": null,
    "duration_ms": 36.378
  },
  "extraction_id": "extr_TJyKFjad-NHxYUKJG2XIl",
  "api_cost": {
    "value": 0.018687899999999997,
    "currency": "USD"
  },
  "cost_breakdown": {
    "total": {
      "value": 0.018687899999999997,
      "currency": "USD"
    },
    "text_prompt_cost": {
      "value": 0.0186243,
      "currency": "USD"
    },
    "text_cached_cost": {
      "value": 0.0,
      "currency": "USD"
    },
    "text_completion_cost": {
      "value": 0.0000636,
      "currency": "USD"
    },
    "text_total_cost": {
      "value": 0.018687899999999997,
      "currency": "USD"
    },
    "audio_prompt_cost": null,
    "audio_completion_cost": null,
    "audio_total_cost": null,
    "token_counts": {
      "prompt_regular_text": 124162,
      "prompt_cached_text": 0,
      "prompt_audio": 0,
      "completion_regular_text": 106,
      "completion_audio": 0,
      "total_tokens": 124268
    },
    "model": "gpt-4o-mini-2024-07-18",
    "is_fine_tuned": false
  }
}
```

</ResponseExample>