## Sync & Async Client


UiForm offers both **synchronous** and **asynchronous** client interfaces, making it versatile for different application needs. The asynchronous client (`AsyncUiForm`) is ideal for high-performance, non-blocking applications where multiple tasks run concurrently. For simpler or blocking operations, the synchronous client (`UiForm`) provides a straightforward approach.

Hereâ€™s how you can use both:

```python
# Async client
from uiform import AsyncUiForm

async def fetch_models():
    uiclient = AsyncUiForm()
    models = await uiclient.models.list()
    print(models)

# Sync client
from uiform import UiForm

client = UiForm()
models = client.models.list()
print(models)
```

Both clients provide the same core functionality, enabling you to list models, create messages, extract data from documents, and more, with the flexibility to match your application's concurrency model.


## Rate Limits

UiForm implements rate limiting to ensure stable service for all users. The API uses a rolling window rate limit with the following configuration:

- **300 requests** per **60-second** window
- Applies across the following API endpoints:
  - `POST /api/v1/documents/extractions`
  - `POST /api/v1/documents/create_messages`

When you exceed the rate limit, the API will return a `429 Too Many Requests` response. The response headers will include:

```bash
Status 429 - {'detail': 'Rate limit exceeded. Please try again later.'}
```

For high-volume applications, we can provide a dedicated plan. [Contact us](mailto:contact@uiform.com) for more information.


## Modality

LLM works with text and image data. UiForm converts documents into different modalities, based on the document type.

#### Native modalities

Here are the list of native modalities supported by UiForm:

<CodeGroup>

```python text
TEXT_TYPES = Literal[".txt", ".csv", ".tsv", ".md", ".log", ".html", ".htm", ".xml", ".json", ".yaml", ".yml", ".rtf", ".ini", ".conf", ".cfg", ".nfo", ".srt", ".sql", ".sh", ".bat", ".ps1", ".js", ".jsx", ".ts", ".tsx", ".py", ".java", ".c", ".cpp", ".cs", ".rb", ".php", ".swift", ".kt", ".go", ".rs", ".pl", ".r", ".m", ".scala"]
```


```python image
IMAGE_TYPES = Literal[".jpg", ".jpeg", ".png", ".gif", ".bmp", ".tiff"]
EXCEL_TYPES = Literal[".xls", ".xlsx", ".ods"]
WORD_TYPES = Literal[".doc", ".docx", ".odt"]
PPT_TYPES = Literal[".ppt", ".pptx", ".odp"]
PDF_TYPES = Literal[".pdf"]
```

```python audio
# Coming soon
```

```python email
# Emails are mime files which contains other mime files (their attachments). 
# Each mime file is converted into its native modality.
EMAIL_TYPES = Literal[".eml", ".msg"]
```

```python web
# MIME HTML files are converted into images (They can be obtained by saving a web page with the option "Single File")
WEB_TYPES = Literal[".mhtml"] # .webarchive coming soon...
```

</CodeGroup>


You can also use the `modality` parameter to specify the modality of the document and override the default modality.

```Python {14-15}
import json
from uiform.client import UiForm

with open("booking_confirmation_json_schema.json", "r") as f:
    json_schema = json.load(f)

client = UiForm()

response = client.documents.extract(
    json_schema = json_schema,
    document="booking_confirmation.jpg",
    model="gpt-4o-mini-2024-07-18",
    temperature=0,
    modality='text' # The image will be converted to text (with an OCR model) before being sent to the LLM
)
```

## Idempotency

Idempotency in UIForm ensures that repeated API requests with the same idempotency key are handled consistently without duplicating processing or generating unintended side effects. When a request is made, UIForm checks if a record with the same idempotency key exists in its database. If a match is found:  

1. **If the request content matches the original request:** The previously computed response is returned.  
2. **If the request content differs:** An error is returned, indicating a conflict.  
3. **If the original request is still being processed:** The API prevents concurrent execution by blocking duplicate processing.  

By leveraging idempotency, UIForm ensures each document or operation is processed only once, returning consistent results and avoiding unnecessary computation.  


## Image Settings

When processing images, several factors can affect the LLM's ability to accurately interpret and extract information. The image_settings parameter allows you to tune images settings to improve extraction quality.

#### API Reference
<ResponseField name="image_settings" type="ImageSettings Object">
  Image preprocessing operations to optimize document analysis.
  <Expandable title="properties">
    <ResponseField name="correct_image_orientation" type="boolean">
      Whether to correct the image orientation. Defaults to true.
    </ResponseField>
    <ResponseField name="dpi" type="integer">
      The DPI of the image. Defaults to 72.
    </ResponseField>
    <ResponseField name="image_to_text" type="string">
      Whether to convert the image to text. Must be either "ocr" or "llm_description". Defaults to "ocr".
    </ResponseField>
    <ResponseField name="browser_canvas" type="string">
      The canvas size of the browser. Must be one of:
      - "A3" (11.7in x 16.54in)
      - "A4" (8.27in x 11.7in) 
      - "A5" (5.83in x 8.27in)
      Defaults to "A4".
    </ResponseField>
  </Expandable>
</ResponseField>
