Easy to use AI-powered form designed to provide a first-class onboarding experience for users.

### Introduction

Integrating an AI-powered form into your app is quick and easy. In this guide, we'll walk you through adding AI to your form using UiForm.

In addition to this guide, there are a variety of example apps available to help with your integration.

## Outline

Here are all the steps needed to integrate an AI-powered form into your app:

<Steps>
  <Step title="Get a json schema">
    Get a json schema compatible with the OpenAPI specification.
  </Step>
  <Step title="Create a React app">
    Create a React app with a UIForm component from your json schema.
  </Step>
  <Step title="Manage authentication from your backend">
    Create a backend route to generate an access token to send requests to UiForm.
  </Step>
  <Step title="Supercharge with AI !">
    Add your AI Inference parameters to the UIForm component.
  </Step>
</Steps>



## 1 - Get a json schema

Generate a json schema compatible with the OpenAPI specification.

There are multiple ways to generate a json schema. We will show a simple way to generate a json schema with pydantic: 

<CodeGroup>
```python JSON Schema generation
from pydantic import BaseModel
import json

class User(BaseModel):
    first_name: str
    last_name: str
    email: str
    age: int
    address: str

with open("jsonSchema.json", "w") as f:
    f.write(json.dumps(User.model_json_schema()))
```

```json schema.json
{
    "properties": {
        "first_name": {
            "title": "First Name",
            "type": "string"
        },
        "last_name": {
            "title": "Last Name",
            "type": "string"
        },
        "email": {
            "title": "Email",
            "type": "string"
        },
        "age": {
            "title": "Age",
            "type": "integer"
        },
        "address": {
            "title": "Address",
            "type": "string"
        }
    },
    "required": [
        "first_name",
        "last_name",
        "email",
        "age",
        "address"
    ],
    "title": "User",
    "type": "object"
}
```
</CodeGroup>




## 2 - Add a form to your react app

Let's add the necessary dependencies and configuration. 

### Install dependencies
First, install the UIForm React SDK which provides the components you'll need:

  ```bash Install react sdk
  npm install @uiform/react
  ```


### Set secrets
To make calls to your backend, you'll need to configure several environment variables. We will then create a backend route to generate an access token to send requests to UiForm.

  ```txt .env
REACT_APP_BACKEND_BASE_URL=https://api.uiform.com           # Your backend server
  ```

### Form definition from schema
Now let's create a basic form component using the schema we generated earlier:

```jsx App.jsx
import { UIForm } from '@uiform/react'
import { JSONSchema7 } from "json-schema";
import schema from './schema.json'
import "@uiform/react/dist/index.css";

function App() {
    return (
        <div className='bg-slate-100 p-4'>
            <UIForm
                schema={schema as JSONSchema7}
                onSubmit={(data) => console.log("data", data)}
                onChange={(data) => console.log("data", data)}
                className='text-[#0A2540] shadow-lg bg-white border-[#0A2540] border rounded-sm'
            />
        </div>
    );
}

export default App;
```



## 3 - Setup your backend route to manage authentication

Your backend route will handle the authentication. It should:
- Validate a bearer token (from the frontend).
- Exchange credentials for a UiForm access token.
- Return the token in a JSON response.


```txt .env.development
# UIForm Configuration
UIFORM_CLIENT_ID=833f3333-07d9-4a16-a13d-92dd880e7adb        # Your unique client identifier
UIFORM_CLIENT_SECRET=xdrwfc7q3J~bKkz-dE3HyWCvhL              # Your secret key (keep this secure!)
UIFORM_AUDIENCE=https://getcube.ai                            # The API audience
UIFORM_TOKEN_URL=https://jolly-curran-jg7f3eplcm.projects.oryapis.com/oauth2/token  # Authentication endpoint
```


<CodeGroup>
```python main.py (FastAPI)
from fastapi import FastAPI, Header, HTTPException
from pydantic import BaseSettings
import httpx

class Settings(BaseSettings):
    UIFORM_CLIENT_ID: str
    UIFORM_CLIENT_SECRET: str
    UIFORM_AUDIENCE: str
    UIFORM_TOKEN_URL: str

settings = Settings()

app = FastAPI()

@app.post("/token")
async def get_token(authorization: str = Header(None)):
    # Check Authorization header
    if not authorization or not authorization.startswith("Bearer "):
        raise HTTPException(status_code=401, detail="Missing or invalid bearer token")

    # In a real scenario, you would validate the bearer token (e.g. JWT) here.
    # For this example, we assume the token is valid if provided.

    form_data = {
        'grant_type': 'client_credentials',
        'client_id': settings.UIFORM_CLIENT_ID,
        'client_secret': settings.UIFORM_CLIENT_SECRET,
        'scope': 'documents_api',
        'audience': settings.UIFORM_AUDIENCE
    }

    async with httpx.AsyncClient() as client:
        resp = await client.post(settings.UIFORM_TOKEN_URL, data=form_data)
        if resp.status_code != 200:
            raise HTTPException(status_code=400, detail="Failed to generate token")

        token_data = resp.json()
        return {"token": token_data}
```
```bash run (FastAPI)
uvicorn main:app --reload --host 0.0.0.0 --port 4000 --env-file .env.development
```



```python main.py (Flask)
from flask import Flask, request, jsonify
from dotenv import load_dotenv
import os
import httpx

# Load environment variables
load_dotenv()

app = Flask(__name__)

# Environment variables
class Settings:
    def __init__(self):
        self.UIFORM_CLIENT_ID = os.getenv('UIFORM_CLIENT_ID')
        self.UIFORM_CLIENT_SECRET = os.getenv('UIFORM_CLIENT_SECRET')
        self.UIFORM_AUDIENCE = os.getenv('UIFORM_AUDIENCE')
        self.UIFORM_TOKEN_URL = os.getenv('UIFORM_TOKEN_URL')

settings = Settings()

@app.route('/token', methods=['POST'])
def get_token():
    # Check Authorization header
    auth_header = request.headers.get('Authorization')
    if not auth_header or not auth_header.startswith('Bearer '):
        return jsonify({'detail': 'Missing or invalid bearer token'}), 401

    # In a real scenario, you would validate the bearer token (e.g. JWT) here.
    # For this example, we assume the token is valid if provided.

    form_data = {
        'grant_type': 'client_credentials',
        'client_id': settings.UIFORM_CLIENT_ID,
        'client_secret': settings.UIFORM_CLIENT_SECRET,
        'scope': 'documents_api',
        'audience': settings.UIFORM_AUDIENCE
    }

    # Make synchronous request with httpx
    response = httpx.post(settings.UIFORM_TOKEN_URL, data=form_data)
    if response.status_code != 200:
        return jsonify({'detail': 'Failed to generate token'}), 400

    token_data = response.json()
    return jsonify({'token': token_data})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=4000)
```
```bash run (Flask)
python main.py
```
</CodeGroup>

### Fetch the token from the route
Update your form component to fetch and use the authentication token:

```javascript App.jsx {5,9, 11-27}
import { UIForm } from '@uiform/react'
import { JSONSchema7 } from "json-schema";
import schema from './schema.json'
import "@uiform/react/dist/index.css";
import { useState, useEffect } from 'react';

function App() {

    const [token, setToken] = useState<string>("")

    useEffect(() => {
        const fetchToken = async () => {
            const response = await fetch(process.env.REACT_APP_BACKEND_BASE_URL + "/token",
                {
                    headers: {
                        "Authorization": `Bearer toto`,
                        "Content-Type": "application/json",
                    },
                    method: "POST",
                    body: JSON.stringify({})
                })
            const data = await response.json()
            console.log("data", data)
            setToken(data.token.access_token)
        }
        fetchToken()
    }, [])

    return (
        <div className='bg-slate-100 p-4'>
            <UIForm
                schema={schema as JSONSchema7}
                onSubmit={(data) => console.log("data", data)}
                onChange={(data) => console.log("data", data)}
                className='text-[#0A2540] shadow-lg bg-white border-[#0A2540] border rounded-sm'
            />
        </div>
    );
}

export default App;
```

## 4 - Add your AI Inference parameters
Finally, configure the AI capabilities of your form. These parameters control how the AI processes your form data. 

```jsx {6-21}
<UIForm 
    schema={schema as JSONSchema7}
    onSubmit={(data) => console.log("data", data)}
    onChange={(data) => console.log("data", data)}
    className='text-[#0A2540] shadow-lg bg-white border-[#0A2540] border rounded-sm'
    aiform={{
        token: token,                              // Authentication token for UIForm service
        mimeTypes: ["application/pdf"],            // Allowed file types for upload (PDF only in this example)
        maxFileSize: 1000000,                      // Maximum file size (1MB)
        stream: true,                              // Enable real-time streaming of AI responses
        aiProvider: "OpenAI",                      // Specify the AI service provider
        chatCompletionParameters: {
            model: "gpt-4o-mini",                  // The AI model to use
            temperature: 0                          // 0 = most deterministic, 1 = most creative
        },
        prompting: {},                             // Custom prompting configuration (empty for default behavior)
        variants: {
            fileUpload: "button",                  // Use button-style upload interface
            uncertaintyDisplay: "none"              // Hide uncertainty indicators
        }
    }}
/>
```

### Parameter Details

#### Authentication
- `token`: Your authentication token for making requests to UIForm

#### File Handling
- `mimeTypes`: Array of allowed file types (e.g., ["application/pdf"])
- `maxFileSize`: Maximum allowed file size in bytes

#### AI Configuration
- `stream`: When enabled, provides real-time streaming of AI responses
- `aiProvider`: The AI service provider to use
- `chatCompletionParameters`: Model-specific settings
  - `model`: The AI model to use
  - `temperature`: Controls response randomness (0-1)

#### UI Customization
- `prompting`: Custom instructions for the AI (empty object uses defaults)
- `variants`: Interface customization options
  - `fileUpload`: Upload interface style ("button" or other options)
  - `uncertaintyDisplay`: How to show AI confidence levels

## Final code

That's it! You now have an AI-powered form in your app.

Check the repository for the full code: [https://github.com/uiform/ui-form-python-react-example](https://github.com/getcube/ui-form-python-react-example)


<CodeGroup>
```jsx App.jsx {36-51}
import { UIForm } from '@uiform/react'
import { JSONSchema7 } from "json-schema";
import schema from './schema.json'
import "@uiform/react/dist/index.css";
import { useState, useEffect } from 'react';

function App() {

    const [token, setToken] = useState<string>("")

    useEffect(() => {
        const fetchToken = async () => {
            const response = await fetch(process.env.REACT_APP_BACKEND_BASE_URL + "/token",
                {
                    headers: {
                        "Authorization": `Bearer toto`,
                        "Content-Type": "application/json",
                    },
                    method: "POST",
                    body: JSON.stringify({})
                })
            const data = await response.json()
            console.log("data", data)
            setToken(data.token.access_token)
        }
        fetchToken()
    }, [])

    return (
        <div className='bg-slate-100 p-4'>
            <UIForm
                schema={schema as JSONSchema7}
                onSubmit={(data) => console.log("data", data)}
                onChange={(data) => console.log("data", data)}
                className='text-[#0A2540] shadow-lg bg-white border-[#0A2540] border rounded-sm'
                aiform={{
                    token: token,                              // Authentication token for UIForm service
                    mimeTypes: ["application/pdf"],            // Allowed file types for upload (PDF only in this example)
                    maxFileSize: 1000000,                      // Maximum file size (1MB)
                    stream: true,                              // Enable real-time streaming of AI responses
                    aiProvider: "OpenAI",                      // Specify the AI service provider
                    chatCompletionParameters: {
                        model: "gpt-4o-mini",                  // The AI model to use
                        temperature: 0                          // 0 = most deterministic, 1 = most creative
                    },
                    prompting: {},                             // Custom prompting configuration (empty for default behavior)
                    variants: {
                        fileUpload: "button",                  // Use button-style upload interface
                        uncertaintyDisplay: "none"              // Hide uncertainty indicators
                    }
                }}
            />
        </div>
    );
}

export default App;
```

```jsx index.js
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

```python main.py (FastAPI)
from fastapi import FastAPI, Header, HTTPException
from pydantic import BaseSettings
import httpx

class Settings(BaseSettings):
    UIFORM_CLIENT_ID: str
    UIFORM_CLIENT_SECRET: str
    UIFORM_AUDIENCE: str
    UIFORM_TOKEN_URL: str

settings = Settings()

app = FastAPI()

@app.post("/token")
async def get_token(authorization: str = Header(None)):
    # Check Authorization header
    if not authorization or not authorization.startswith("Bearer "):
        raise HTTPException(status_code=401, detail="Missing or invalid bearer token")

    # In a real scenario, you would validate the bearer token (e.g. JWT) here.
    # For this example, we assume the token is valid if provided.

    form_data = {
        'grant_type': 'client_credentials',
        'client_id': settings.UIFORM_CLIENT_ID,
        'client_secret': settings.UIFORM_CLIENT_SECRET,
        'scope': 'documents_api',
        'audience': settings.UIFORM_AUDIENCE
    }

    async with httpx.AsyncClient() as client:
        resp = await client.post(settings.UIFORM_TOKEN_URL, data=form_data)
        if resp.status_code != 200:
            raise HTTPException(status_code=400, detail="Failed to generate token")

        token_data = resp.json()
        return {"token": token_data}
```

```python main.py (Flask)
from flask import Flask, request, jsonify
from dotenv import load_dotenv
import os
import httpx

# Load environment variables
load_dotenv()

app = Flask(__name__)

# Environment variables
class Settings:
    def __init__(self):
        self.UIFORM_CLIENT_ID = os.getenv('UIFORM_CLIENT_ID')
        self.UIFORM_CLIENT_SECRET = os.getenv('UIFORM_CLIENT_SECRET')
        self.UIFORM_AUDIENCE = os.getenv('UIFORM_AUDIENCE')
        self.UIFORM_TOKEN_URL = os.getenv('UIFORM_TOKEN_URL')

settings = Settings()

@app.route('/token', methods=['POST'])
def get_token():
    # Check Authorization header
    auth_header = request.headers.get('Authorization')
    if not auth_header or not auth_header.startswith('Bearer '):
        return jsonify({'detail': 'Missing or invalid bearer token'}), 401

    # In a real scenario, you would validate the bearer token (e.g. JWT) here.
    # For this example, we assume the token is valid if provided.

    form_data = {
        'grant_type': 'client_credentials',
        'client_id': settings.UIFORM_CLIENT_ID,
        'client_secret': settings.UIFORM_CLIENT_SECRET,
        'scope': 'documents_api',
        'audience': settings.UIFORM_AUDIENCE
    }

    # Make synchronous request with httpx
    response = httpx.post(settings.UIFORM_TOKEN_URL, data=form_data)
    if response.status_code != 200:
        return jsonify({'detail': 'Failed to generate token'}), 400

    token_data = response.json()
    return jsonify({'token': token_data})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=4000)
```
</CodeGroup>





