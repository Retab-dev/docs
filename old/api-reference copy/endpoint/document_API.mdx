---
title: 'Process Documents'
---

## Document Analysis

Extract information from any documents using our Document API.

<RequestExample>


```python python
from pydantic import BaseModel
from typing import Literal
from uiform.io import read_mime_data_from_file
from uiform.client import UiForm
client = UiForm(api_key="your_cube_api_key")

class User(BaseModel):
    full_name: str
    email: str
    age: int
    status: Literal["active", "inactive", "pending"]

pdf_document = read_mime_data_from_file("../notebooks/Luiz/data/example.PDF")

client.process_document(
    json_schema = User.model_json_schema(),
    documents = [pdf_document],
    model="gpt-4o-mini",
    prompting_context={
        "regex_instructions": {
            "name": "vat_number",
            "pattern": r"\b[A-Z]{2}\d{9}\b",
            "description": "VAT number in the format XX999999999"
        }
    }
)
```

```bash curl
curl --request POST \
  --url http://api.uiform.com/documents/process \
  --header 'Content-Type: application/json' \
  --header 'Authorization: Bearer $OPENAI_API_KEY' \
  --data '{
  "model": "gpt-4o-2024-08-06",
  "json_schema": {},
  "stream": false,
  "seed": null,
  "temperature": 0,
  "documents": [
    {
      "id": "<string>",
      "name": "<string>",
      "size": 123,
      "mime_type": "<string>",
      "metadata": {
        "is_inline": false
      },
      "content": "<string>"
    }
  ],
  "prompting_context": {
    "document_structure": [
      {
        "content_summary": "Contains sender and receiver addresses",
        "title": "Invoice Header"
      }
    ],
    "domain_glossary": [
      {
        "definition": "Bill of Lading",
        "term": "B/L"
      }
    ],
    "other_context": [
      "Please consider the following instructions: ..."
    ],
    "regex_instructions": [
      {
        "description": "All potential VAT numbers in the documents",
        "name": "VAT Number",
        "pattern": "[Ff][Rr]\\s*(\\d\\s*){11}"
      }
    ],
    "user_info": {
      "email": "john.doe@domain.com",
      "first_name": "John",
      "last_name": "Doe"
    }
  },
  "ws_identifier": "<string>",
  "store_in_db": false
}'
```



</RequestExample>


<ResponseExample>

```json 200
{
  "model": "gpt-4o-2024-08-06",
  "json_schema": {},
  "stream": false,
  "seed": null,
  "temperature": 0,
  "documents": [
    {
      "id": "<string>",
      "name": "<string>",
      "size": 123,
      "mime_type": "<string>",
      "metadata": {
        "is_inline": false
      }
    }
  ],
  "prompting_context": {
    "document_structure": [
      {
        "content_summary": "Contains sender and receiver addresses",
        "title": "Invoice Header"
      }
    ],
    "domain_glossary": [
      {
        "definition": "Bill of Lading",
        "term": "B/L"
      }
    ],
    "other_context": [
      "Please consider the following instructions: ..."
    ],
    "regex_instructions": [
      {
        "description": "All potential VAT numbers in the documents",
        "name": "VAT Number",
        "pattern": "[Ff][Rr]\\s*(\\d\\s*){11}"
      }
    ],
    "user_info": {
      "email": "john.doe@domain.com",
      "first_name": "John",
      "last_name": "Doe"
    }
  },
  "ws_identifier": "<string>",
  "store_in_db": false,
  "response": "<any>",
  "likelihoods": "<any>",
  "regex_instruction_results": [
    {
      "instruction": {
        "name": "<string>",
        "pattern": "<string>",
        "description": "<string>"
      },
      "hits": [
        "<string>"
      ]
    }
  ],
  "prompting_context_message": "",
  "usage": {
    "model": "<string>",
    "input_tokens": 123,
    "output_tokens": 123,
    "cost": 123
  }
}
```

```json 422
{
  "detail": [
    {
      "loc": [
        "<string>"
      ],
      "msg": "<string>",
      "type": "<string>"
    }
  ]
}
```


</ResponseExample>

### Parameters
<ParamField body="model" type="string" required>
  Model used for chat completion
</ParamField>

<ParamField body="json_schema" type="object" required>
  JSON schema format used to validate the output data
</ParamField>

<ParamField body="stream" type="boolean" default="false">
  If true, the extraction will be streamed to the user using the active WebSocket connection
</ParamField>

<ParamField body="seed" type="integer">
  Seed for the random number generator. If not provided, a random seed will be generated.
</ParamField>

<ParamField body="temperature" type="number" default="0.0">
  Temperature for sampling. If not provided, the default temperature for the model will be used.
</ParamField>

<ParamField body="documents" type="array" required>
  List of documents to be analyzed
</ParamField>

<ParamField body="prompting_context" type="object">
  Additional context to be used by the AI model
  <Expandable title="properties">
    <ParamField body="user_info" type="object">
      User information
      <Expandable title="properties">
        <ParamField body="first_name" type="string">First name of the user</ParamField>
        <ParamField body="last_name" type="string">Last name of the user</ParamField>
        <ParamField body="email" type="string">Email of the user</ParamField>
        <ParamField body="organization" type="string">Organization of the user</ParamField>
        <ParamField body="phone" type="string">Phone number of the user</ParamField>
        <ParamField body="date" type="string">Date in ISO format</ParamField>
      </Expandable>
    </ParamField>

    <ParamField body="regex_instructions" type="array">
      Regex-based instructions to identify potential data candidates in the text
      <Expandable title="properties">
        <ParamField body="name" type="string">A key or label for the data being extracted</ParamField>
        <ParamField body="pattern" type="string">The regex pattern to search for</ParamField>
        <ParamField body="description" type="string">A human-readable explanation of what is being extracted</ParamField>
      </Expandable>
    </ParamField>

    <ParamField body="document_structure" type="array">
      Structural overview of the document
      <Expandable title="properties">
        <ParamField body="title" type="string">The title of the section</ParamField>
        <ParamField body="content_summary" type="string">A human-readable summary of the content of the section</ParamField>
      </Expandable>
    </ParamField>

    <ParamField body="domain_glossary" type="array">
      A glossary of domain-specific terms that might appear in the document
      <Expandable title="properties">
        <ParamField body="term" type="string">The domain-specific term</ParamField>
        <ParamField body="definition" type="string">The definition of the term</ParamField>
      </Expandable>
    </ParamField>

    <ParamField body="other_context" type="string | array | object">
      Other context that the model should consider when extracting or formatting data
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="ws_identifier" type="string">
  Identifier of the WebSocket connection used to stream the extraction
</ParamField>

<ParamField body="store_in_db" type="boolean" default="false">
  If true, the extraction will be stored in the database
</ParamField>

### Response Fields
<ResponseField name="response" type="any" required>
  The extracted data from the documents based on the provided JSON schema
</ResponseField>

<ResponseField name="likelihoods" type="any" required>
  Confidence scores for the extracted data
</ResponseField>

<ResponseField name="regex_instruction_results" type="array" required>
  Results of regex-based instructions
  <Expandable title="properties">
    <ResponseField name="instruction" type="object">
      <Expandable title="properties">
        <ResponseField name="name" type="string">The key/label for the data being extracted</ResponseField>
        <ResponseField name="pattern" type="string">The regex pattern used</ResponseField>
        <ResponseField name="description" type="string">Description of what was extracted</ResponseField>
      </Expandable>
    </ResponseField>
    <ResponseField name="hits" type="array">Array of strings matching the regex pattern</ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="prompting_context_message" type="string">
  Additional context message used during processing
</ResponseField>

<ResponseField name="usage" type="object" required>
  Usage statistics for the API call
  <Expandable title="properties">
    <ResponseField name="model" type="string">The model used for processing</ResponseField>
    <ResponseField name="input_tokens" type="number">Number of input tokens used</ResponseField>
    <ResponseField name="output_tokens" type="number">Number of output tokens generated</ResponseField>
    <ResponseField name="cost" type="number">Total cost of the API call</ResponseField>
  </Expandable>
</ResponseField>



---