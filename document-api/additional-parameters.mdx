In this section, we will see how to use our API more in depth:


## Modality

LLM works with text and image data. UiForm works by converting documents into different modalities, based on the document type.

### Native modalities

Here are the list of native modalities supported by UiForm:

<CodeGroup>

```python text
TEXT_TYPES = Literal[".txt", ".csv", ".tsv", ".md", ".log", ".html", ".htm", ".xml", ".json", ".yaml", ".yml", ".rtf", ".ini", ".conf", ".cfg", ".nfo", ".srt", ".sql", ".sh", ".bat", ".ps1", ".js", ".jsx", ".ts", ".tsx", ".py", ".java", ".c", ".cpp", ".cs", ".rb", ".php", ".swift", ".kt", ".go", ".rs", ".pl", ".r", ".m", ".scala"]

```


```python image
IMAGE_TYPES = Literal[".jpg", ".jpeg", ".png", ".gif", ".bmp", ".tiff"]
EXCEL_TYPES = Literal[".xls", ".xlsx", ".ods"]
WORD_TYPES = Literal[".doc", ".docx", ".odt"]
PPT_TYPES = Literal[".ppt", ".pptx", ".odp"]
PDF_TYPES = Literal[".pdf"]
```

```python audio
# Coming soon
```

```python email
# Emails are mime files which contains other mime files (their attachments). 
# Each mime file is converted into its native modality.
EMAIL_TYPES = Literal[".eml", ".msg"]
```

</CodeGroup>


You can also use the `modality` parameter to specify the modality of the document and override the default modality.

```Python {14-15}
import json
from uiform.client import UiForm

with open("booking_confirmation_json_schema.json", "r") as f:
    json_schema = json.load(f)

client = UiForm()

response = client.documents.extract(
    json_schema = json_schema,
    document="booking_confirmation.jpg",
    model="gpt-4o-mini-2024-07-18",
    temperature=0,
    modality='text' # The image will be converted to text (with Tesseract) 
    # before being sent to the LLM
)
```



## Additional Context
When processing documents, you may want to provide additional context to help the AI better understand the document. This could be previous communications, related documents, or any other relevant information.

### Enriching Your Queries

The additional context parameters allow you to significantly enhance the AI's understanding and processing capabilities. Here's how you can leverage each parameter:

```Python {9-16,23}
import json
from uiform.client import UiForm

with open("booking_confirmation_json_schema.json", "r") as f:
    json_schema = json.load(f)

client = UiForm()

additional_context = {'regex_instructions' : [
        {
            "name": "vat_number",
            "pattern": r"[Ff][Rr]\s*(\d\s*){11}",
            "description": "VAT number in the format XX999999999"
        }
    ]
}

response = client.documents.extract(
    json_schema = json_schema,
    document = "booking_confirmation.jpg",
    model="gpt-4o-mini-2024-07-18",
    temperature=0,
    additional_context=additional_context
)
```

#### 1. User Information (`user_info`)
Providing user context helps personalize responses and improve document understanding:
- **Personal Details**: Name and contact information help customize responses
- **Organization Context**: Helps the AI understand company-specific terminology
- **Date**: Useful for temporal context in document processing

Example:
```json
{
  "user_info": {
    "first_name": "John",
    "last_name": "Smith",
    "organization": "Acme Corp",
    "date": "2024-03-20"
  }
}
```

#### 2. Regex Instructions (`regex_instructions`)
Define custom patterns to extract specific data types:
- **Document Numbers**: Extract invoice numbers, PO numbers, etc.
- **Custom Formats**: Identify company-specific identifiers
- **Validation**: Ensure extracted data matches expected patterns

Example:
```json
{
  "regex_instructions": [
    {
      "name": "InvoiceNumber",
      "pattern": "INV-\\d{6}",
      "description": "Matches invoice numbers in format INV-XXXXXX"
    },
    {
      "name": "EUVatNumber",
      "pattern": "^[A-Z]{2}\\d{8,12}$",
      "description": "Matches EU VAT numbers"
    }
  ]
}
```

#### 3. Document Structure (`document_structure`)
Guide the AI's understanding of document layout:
- **Section Recognition**: Define expected document sections
- **Content Mapping**: Provide context for different document areas
- **Hierarchical Understanding**: Establish relationships between sections

Example:
```json
{
  "document_structure": [
    {
      "title": "Invoice Header",
      "content_summary": "Contains company details, dates, and invoice numbers"
    },
    {
      "title": "Line Items",
      "content_summary": "List of products/services with quantities and prices"
    }
  ]
}
```

#### 4. Domain Glossary (`domain_glossary`)
Enhance understanding of industry-specific terminology:
- **Technical Terms**: Define specialized vocabulary
- **Abbreviations**: Explain industry acronyms
- **Context-Specific Meanings**: Clarify terms that have special meaning in your domain

Example:
```json
{
  "domain_glossary": [
    {
      "term": "FOB",
      "definition": "Free On Board - Seller pays for transportation of goods to port of shipment"
    },
    {
      "term": "MOQ",
      "definition": "Minimum Order Quantity - The smallest amount of products that can be ordered"
    }
  ]
}
```

#### 5. Other Context (`other_context`)
Provide additional flexible context:
- **Previous Communications**: Include relevant email threads or chat history
- **Related Documents**: Reference numbers of related documents
- **Business Rules**: Specific processing instructions or business logic
- **Custom Fields**: Any additional context-specific information

Example:
```json
{
  "other_context": {
    "previous_order_numbers": ["ORD-2024-001", "ORD-2024-002"],
    "preferred_currency": "EUR",
    "special_instructions": "All prices should include VAT"
  }
}
```

### Best Practices
- Provide only relevant context to avoid noise in the processing
- Use consistent formatting in regex patterns
- Keep glossary terms specific to your domain
- Update document structure definitions as templates change
- Regularly review and update business rules in other_context

### API Reference

<ResponseField name="additional_context" type="PromptingContext Object">
  <Expandable title="properties">
    <ResponseField name="user_info" type="UserInfo Object">
      Information about the user making the request
      <Expandable title="properties">
        <ResponseField name="first_name" type="string">
          The user's first name
        </ResponseField>
        <ResponseField name="last_name" type="string">
          The user's last name
        </ResponseField>
        <ResponseField name="email" type="string">
          The user's email address
        </ResponseField>
        <ResponseField name="organization" type="string">
          The user's organization
        </ResponseField>
        <ResponseField name="phone" type="string">
          The user's phone number
        </ResponseField>
        <ResponseField name="date" type="datetime.date">
          The date associated with the user
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="regex_instructions" type="array[RegexInstruction]">
      List of regex-based instructions to identify potential data candidates in the text
      <Expandable title="RegexInstruction properties">
        <ResponseField name="name" type="string">
          A key or label for the data being extracted (e.g., "VATNumber")
        </ResponseField>
        <ResponseField name="pattern" type="string">
          The regex pattern to search for
        </ResponseField>
        <ResponseField name="description" type="string">
          A human-readable explanation of what is being extracted
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="document_structure" type="array[DocumentSection]">
      Structural overview of the document
      <Expandable title="DocumentSection properties">
        <ResponseField name="title" type="string">
          The title of the section (e.g., "Invoice Header")
        </ResponseField>
        <ResponseField name="content_summary" type="string">
          A human-readable summary of the content of the section
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="domain_glossary" type="array[DomainTerm]">
      A glossary of domain-specific terms that might appear in the document
      <Expandable title="DomainTerm properties">
        <ResponseField name="term" type="string">
          The domain-specific term (e.g., "B/L")
        </ResponseField>
        <ResponseField name="definition" type="string">
          The definition of the term (e.g., "Bill of Lading")
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="other_context" type="dict[string, string]">
      Other context that the model should consider when extracting or formatting data. Can be a dictionary (string -> string), a string, or a list of strings.
    </ResponseField>
  </Expandable>
</ResponseField>
